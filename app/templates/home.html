{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
  <h1 class="subtitle">Compare 2 Zips for Upcoming Elections</h1>
  <form method="POST" class="vote-form">
    {{ form2.hidden_tag() }}
    <div class="form-row">
        <div class="form-group col-md-6">
            {{ form2.zip_code_1.label }}
            {{ form2.zip_code_1(id="zip_code_1", class="form-control") }}
            {% for error in form2.zip_code_1.errors %}
            <span class="text-danger">{{ error }}</span>
            {% endfor %}
        </div>
        <div class="form-group col-md-6">
            {{ form2.zip_code_2.label }}
            {{ form2.zip_code_2(id="zip_code_2", class="form-control") }}
            {% for error in form2.zip_code_2.errors %}
            <span class="text-danger">{{ error }}</span>
            {% endfor %}
        </div>
    </div>
    <button type="submit" id="submit-button" class="btn btn-primary">{{ form2.submit.label }}</button>
</form>
</div>

<div class="container mt-5">
    <h1 class="subtitle">Compare 2 Zips for a Year</h1>
    <form method="POST" class="vote-form">
        {{ form1.hidden_tag() }}
        <div class="form-row">
            <div class="form-group col-md-6">
                {{ form1.zip_code_1.label }}
                {{ form1.zip_code_1(id="zip_code_1", class="form-control") }}
                {% for error in form1.zip_code_1.errors %}
                <span class="text-danger">{{ error }}</span>
                {% endfor %}
            </div>
            <div class="form-group col-md-6">
                {{ form1.zip_code_2.label }}
                {{ form1.zip_code_2(id="zip_code_2", class="form-control") }}
                {% for error in form1.zip_code_2.errors %}
                <span class="text-danger">{{ error }}</span>
                {% endfor %}
            </div>
        </div>
        <div class="form-group">
            {{ form1.year.label}}
            {{ form1.year(id="year", class="form-control") }}
        </div>
        <button type="submit" id="submit-button" class="btn btn-primary">{{ form1.submit.label }}</button>
    </form>
</div>

<!-- Modal -->
<div class="modal fade" id="errorModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Form Submission Error</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Please ensure all fields are filled correctly.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script>
$(document).ready(function(){
  $('#submit-button').click(function(e){
    var zip_code_1 = $('#zip_code_1').val();
    var zip_code_2 = $('#zip_code_2').val();
    var year = $('#year').val();
    
    if(zip_code_1 == "" || zip_code_2 == "" || year == ""){
      e.preventDefault();
      $('#errorModal').modal('show');
    }
  });
});
</script>

{% endblock %}
